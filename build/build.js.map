{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.js","src/synth.js","src/synth_components/oscillator.js","src/ui_components/UI.js","src/ui_components/base.js","src/ui_components/knob.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\r\n\r\nimport Synth from './synth.js';\r\n\r\n// Instantiate the Synth\r\n// And link the audio context container\r\nconst synth = new Synth(new ( window.AudioContext || window.webkitAudioContext )());\r\nsynth.setupUI();\r\n\r\n/*\r\n    Getting the note frequencies:\r\n\r\n    The base for calculating the frequencies is 440 Hz, this is a A4- the first\r\n    A note above middle C (C4).\r\n\r\n    All note frequencies are calculated from this point on with the following calculation:\r\n    The base frequency TIMES the twelfth root of two TO THE POWER OF the amount of half steps from A4.\r\n    In short: 440 * (2^(1/12))^h. Where h is the half steps away from A4 (which will be negative if \r\n    we travel to the left on the keyboard).\r\n */\r\nconst ul = document.getElementById(\"keyboard\");\r\nconst items = ul.getElementsByTagName(\"li\");\r\n\r\n// When the user presses down on a keyboard list element\r\n// we will calculate the frequency of the note and play it\r\nfor (let i = 0; i < items.length; ++i) {\r\n    items[i].onmousedown = function(){\r\n        synth.setFrequency(parseInt(this.dataset.half));\r\n        synth.start();\r\n    }\r\n\r\n}\r\n\r\n// On Mouseup we will stop all oscillators, I'm putting this on document.body\r\n// instead of on the list elements because the user can hold down the key while\r\n// still moving the mouse, which messes it all up\r\ndocument.addEventListener('mouseup', function(){\r\n    synth.stop();\r\n});\r\n\r\n/*\r\n Shifting the keyboard to the left or right using the octave controls\r\n */\r\nlet octaveRange = 1; // The default state\r\ndocument.querySelector('[data-ctrl=\"octave-left\"]').addEventListener('click', function(){\r\n    if( !this.classList.contains('active')) {\r\n        document.querySelector('[data-ctrl=\"octave-right\"]').classList.remove('active');\r\n        octaveRange++;\r\n        if( octaveRange > 1 ) this.classList.add('active');\r\n        moveKeyboardOctave('down');\r\n    }\r\n});\r\ndocument.querySelector('[data-ctrl=\"octave-right\"]').addEventListener('click', function(){\r\n    if( !this.classList.contains('active')) {\r\n        document.querySelector('[data-ctrl=\"octave-left\"]').classList.remove('active');\r\n        octaveRange--;\r\n        if( octaveRange < 1 ) this.classList.add('active');\r\n        moveKeyboardOctave('up');\r\n    }\r\n});\r\nfunction moveKeyboardOctave( direction ){\r\n    let halfStep;\r\n    if( direction === 'up' ){\r\n        for (let i = 0; i < items.length; ++i) {\r\n            halfStep = parseInt(items[i].dataset.half) + 12;\r\n            items[i].dataset.half = half;\r\n        }\r\n    } else {\r\n        for (let i = 0; i < items.length; ++i) {\r\n            halfStep = parseInt(items[i].dataset.half) - 12;\r\n            items[i].dataset.half = half;\r\n        }\r\n    }\r\n}","import UI from \"./ui_components/UI.js\";\r\nimport Oscillator from \"./synth_components/oscillator\";\r\n\r\nclass Synth{\r\n    constructor(context){\r\n        this.context = context;\r\n        this.oscillators = [\r\n            new Oscillator(context),\r\n            new Oscillator(context),\r\n        ];\r\n    }\r\n\r\n    get Oscillators(){\r\n        return this.oscillators;\r\n    }\r\n\r\n    setFrequency(halfStep){\r\n        this.oscillators.forEach(function(osc){\r\n            osc.setFrequency(halfStep);\r\n        });\r\n    }\r\n\r\n    start(){\r\n        this.oscillators.forEach(function(osc){\r\n            osc.start();\r\n        });\r\n    }\r\n\r\n    stop(){\r\n        this.oscillators.forEach(function(osc){\r\n           osc.stop();\r\n        });\r\n    }\r\n\r\n    setupUI(){\r\n        this.UI = new UI(this);\r\n    }\r\n}\r\n\r\nexport default Synth;","class Oscillator{\r\n    constructor(context){\r\n        this.context = context;\r\n    }\r\n    setFrequency(halfStep){\r\n        this.frequency = 440 * ( Math.pow( Math.pow(2, 1/12), halfStep) );\r\n    }\r\n    start(){\r\n        this.oscillator = this.context.createOscillator();\r\n        this.oscillator.connect(this.context.destination);\r\n        this.oscillator.frequency.value = this.frequency;\r\n        this.oscillator.start();\r\n    }\r\n    stop(){\r\n        if(this.oscillator !== undefined )\r\n            this.oscillator.stop();\r\n    }\r\n    set gainComponent(component){\r\n        this.gainControl = component;\r\n    }\r\n}\r\n\r\nexport default Oscillator;","import Knob from \"./knob\";\r\n\r\nclass UI{\r\n    constructor(synth){\r\n        this.synth = synth;\r\n\r\n        this.setupKnobs();\r\n\r\n        // Mouse up always disables any mousemove event handlers\r\n        document.addEventListener('mouseup', function(){\r\n            document.body.onmousemove = '';\r\n        }.bind(this));\r\n    }\r\n    setupKnobs(){\r\n\r\n        let knobElements = document.querySelectorAll('[data-component=\"knob\"]');\r\n        knobElements.forEach(function(element){\r\n            if( element.dataset.componentparent === 'osc[0]' )\r\n                this.synth.Oscillators[0].gainControl = new Knob(element);\r\n        }.bind(this));\r\n\r\n    }\r\n}\r\n\r\nexport default UI;","class UI_Component_Base{\r\n    constructor(element){\r\n        this.element = element;\r\n\r\n    }\r\n}\r\n\r\nexport default UI_Component_Base;","import UI_Component_Base from './base';\r\n\r\nclass Knob extends UI_Component_Base{\r\n\r\n    constructor(element){\r\n        super(element);\r\n\r\n        this.element.dataset.value = '0';\r\n\r\n        this.minVal = 0;\r\n        this.maxVal = 250;\r\n        this.value = 0;\r\n        this.lastCursorPosition = 0;\r\n\r\n        this.dial = this.createDial();\r\n\r\n        this.setStyle();\r\n\r\n        this.element.onmousedown = function(){\r\n            this.updateValue();\r\n        }.bind(this);\r\n    }\r\n\r\n    createDial(){\r\n\r\n        let elementOffset = this.element.getBoundingClientRect();\r\n        let dimension = elementOffset.width + 10;\r\n\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svg.setAttribute(\"width\", dimension.toString());\r\n        svg.setAttribute(\"height\", dimension.toString());\r\n        svg.setAttribute(\"viewBox\", '0 0 '+dimension.toString()+' '+dimension.toString());\r\n\r\n        let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        let radius = (dimension / 2) - 4;\r\n        circle.setAttribute('cx', (dimension /2).toString());\r\n        circle.setAttribute('cy', (dimension /2).toString());\r\n        circle.setAttribute('r', radius.toString());\r\n        circle.setAttribute('fill', 'none');\r\n        circle.setAttribute('stroke', 'black');\r\n        circle.setAttribute('stroke-width', '1');\r\n\r\n        let circumference = (2 * Math.PI * radius);\r\n        //circle.setAttribute('data-endpoint', (circumference*0.33).toString() );\r\n\r\n        circle.startPoint = circumference;\r\n        circle.endPoint = (circumference*0.33);\r\n\r\n        circumference = circumference.toString();\r\n        //circle.setAttribute('data-startpoint', circumference);\r\n        circle.setAttribute('stroke-dasharray', circumference + ' ' + circumference);\r\n        circle.setAttribute('stroke-dashoffset', (radius*0.33).toString());\r\n\r\n        svg.appendChild(circle);\r\n        this.element.parentNode.appendChild(svg);\r\n\r\n        return circle;\r\n\r\n    }\r\n\r\n    setStyle(){\r\n        let val = this.value - (this.maxVal / 2);\r\n            val = \"rotate(\" + val + \"deg)\";\r\n        this.element.style.transform = val;\r\n        this.element.style.webkitTransform = val;\r\n        this.element.style.MozTransform = val;\r\n        this.element.style.msTransform = val;\r\n        this.element.style.OTransform = val;\r\n\r\n        // Get percentage of value\r\n        let valPercentage = ((this.value - this.minVal) * 100) / (this.maxVal - this.minVal);\r\n\r\n        // Get dial value\r\n        let dialVal = (this.dial.endPoint - this.dial.startPoint) * ((100-valPercentage) / 100 );\r\n\r\n        // Set percentage of dial\r\n        this.dial.setAttribute('stroke-dashoffset', (this.dial.endPoint - dialVal).toString() );\r\n    }\r\n\r\n    updateValue(){\r\n        document.body.onmousemove = function(event) {\r\n\r\n            let elementOffset = this.element.getBoundingClientRect();\r\n            let elementCenter = elementOffset.top + (elementOffset.height / 2);\r\n            let cursorRelativeToCenter = (elementCenter - event.clientY) / 150;\r\n\r\n            if (cursorRelativeToCenter > 0 ) {\r\n\r\n                if ((this.lastCursorPosition < cursorRelativeToCenter) &&\r\n                    (this.value < this.maxVal))\r\n                    this.value = this.value + cursorRelativeToCenter;\r\n                else if (this.value > this.minVal)\r\n                    this.value = this.value - cursorRelativeToCenter;\r\n\r\n            } else {\r\n\r\n                if ((this.lastCursorPosition > cursorRelativeToCenter) &&\r\n                    (this.value > this.minVal))\r\n                    this.value = this.value + cursorRelativeToCenter;\r\n                else if (this.value < this.maxVal)\r\n                    this.value = this.value - cursorRelativeToCenter;\r\n\r\n            }\r\n\r\n            this.lastCursorPosition = cursorRelativeToCenter;\r\n\r\n            this.setStyle();\r\n\r\n        }.bind(this);\r\n    }\r\n}\r\n\r\nexport default Knob;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi5qcyIsInNyYy9zeW50aC5qcyIsInNyYy9zeW50aF9jb21wb25lbnRzL29zY2lsbGF0b3IuanMiLCJzcmMvdWlfY29tcG9uZW50cy9VSS5qcyIsInNyYy91aV9jb21wb25lbnRzL2Jhc2UuanMiLCJzcmMvdWlfY29tcG9uZW50cy9rbm9iLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FBRUE7Ozs7OztBQUVBO0FBQ0E7QUFDQSxJQUFNLFFBQVEsb0JBQVUsS0FBTSxPQUFPLFlBQVAsSUFBdUIsT0FBTyxrQkFBcEMsR0FBVixDQUFkO0FBQ0EsTUFBTSxPQUFOOztBQUVBOzs7Ozs7Ozs7OztBQVdBLElBQU0sS0FBSyxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBWDtBQUNBLElBQU0sUUFBUSxHQUFHLG9CQUFILENBQXdCLElBQXhCLENBQWQ7O0FBRUE7QUFDQTtBQUNBLEtBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxNQUFNLE1BQTFCLEVBQWtDLEVBQUUsQ0FBcEMsRUFBdUM7QUFDbkMsVUFBTSxDQUFOLEVBQVMsV0FBVCxHQUF1QixZQUFVO0FBQzdCLGNBQU0sWUFBTixDQUFtQixTQUFTLEtBQUssT0FBTCxDQUFhLElBQXRCLENBQW5CO0FBQ0EsY0FBTSxLQUFOO0FBQ0gsS0FIRDtBQUtIOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBcUMsWUFBVTtBQUMzQyxVQUFNLElBQU47QUFDSCxDQUZEOztBQUlBOzs7QUFHQSxJQUFJLGNBQWMsQ0FBbEIsQyxDQUFxQjtBQUNyQixTQUFTLGFBQVQsQ0FBdUIsMkJBQXZCLEVBQW9ELGdCQUFwRCxDQUFxRSxPQUFyRSxFQUE4RSxZQUFVO0FBQ3BGLFFBQUksQ0FBQyxLQUFLLFNBQUwsQ0FBZSxRQUFmLENBQXdCLFFBQXhCLENBQUwsRUFBd0M7QUFDcEMsaUJB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LEdBQWEsc0JBQTFCO0FBRVA7O0FBRUQscUNBQUssa0JBQUwsR0FBMEIsc0JBQTFCOztBQUVBLHFDQUFLLFFBQUw7QUFFSCx5QkE1QjJCLENBNEIxQixJQTVCMEIsQ0E0QnJCLElBNUJxQixDQUE1QjtBQTZCSDs7Ozs7O2tCQUdVLEkiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgU3ludGggZnJvbSAnLi9zeW50aC5qcyc7XHJcblxyXG4vLyBJbnN0YW50aWF0ZSB0aGUgU3ludGhcclxuLy8gQW5kIGxpbmsgdGhlIGF1ZGlvIGNvbnRleHQgY29udGFpbmVyXHJcbmNvbnN0IHN5bnRoID0gbmV3IFN5bnRoKG5ldyAoIHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCApKCkpO1xyXG5zeW50aC5zZXR1cFVJKCk7XHJcblxyXG4vKlxyXG4gICAgR2V0dGluZyB0aGUgbm90ZSBmcmVxdWVuY2llczpcclxuXHJcbiAgICBUaGUgYmFzZSBmb3IgY2FsY3VsYXRpbmcgdGhlIGZyZXF1ZW5jaWVzIGlzIDQ0MCBIeiwgdGhpcyBpcyBhIEE0LSB0aGUgZmlyc3RcclxuICAgIEEgbm90ZSBhYm92ZSBtaWRkbGUgQyAoQzQpLlxyXG5cclxuICAgIEFsbCBub3RlIGZyZXF1ZW5jaWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhpcyBwb2ludCBvbiB3aXRoIHRoZSBmb2xsb3dpbmcgY2FsY3VsYXRpb246XHJcbiAgICBUaGUgYmFzZSBmcmVxdWVuY3kgVElNRVMgdGhlIHR3ZWxmdGggcm9vdCBvZiB0d28gVE8gVEhFIFBPV0VSIE9GIHRoZSBhbW91bnQgb2YgaGFsZiBzdGVwcyBmcm9tIEE0LlxyXG4gICAgSW4gc2hvcnQ6IDQ0MCAqICgyXigxLzEyKSleaC4gV2hlcmUgaCBpcyB0aGUgaGFsZiBzdGVwcyBhd2F5IGZyb20gQTQgKHdoaWNoIHdpbGwgYmUgbmVnYXRpdmUgaWYgXHJcbiAgICB3ZSB0cmF2ZWwgdG8gdGhlIGxlZnQgb24gdGhlIGtleWJvYXJkKS5cclxuICovXHJcbmNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJrZXlib2FyZFwiKTtcclxuY29uc3QgaXRlbXMgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpXCIpO1xyXG5cclxuLy8gV2hlbiB0aGUgdXNlciBwcmVzc2VzIGRvd24gb24gYSBrZXlib2FyZCBsaXN0IGVsZW1lbnRcclxuLy8gd2Ugd2lsbCBjYWxjdWxhdGUgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgbm90ZSBhbmQgcGxheSBpdFxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICBpdGVtc1tpXS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc3ludGguc2V0RnJlcXVlbmN5KHBhcnNlSW50KHRoaXMuZGF0YXNldC5oYWxmKSk7XHJcbiAgICAgICAgc3ludGguc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8vIE9uIE1vdXNldXAgd2Ugd2lsbCBzdG9wIGFsbCBvc2NpbGxhdG9ycywgSSdtIHB1dHRpbmcgdGhpcyBvbiBkb2N1bWVudC5ib2R5XHJcbi8vIGluc3RlYWQgb2Ygb24gdGhlIGxpc3QgZWxlbWVudHMgYmVjYXVzZSB0aGUgdXNlciBjYW4gaG9sZCBkb3duIHRoZSBrZXkgd2hpbGVcclxuLy8gc3RpbGwgbW92aW5nIHRoZSBtb3VzZSwgd2hpY2ggbWVzc2VzIGl0IGFsbCB1cFxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oKXtcclxuICAgIHN5bnRoLnN0b3AoKTtcclxufSk7XHJcblxyXG4vKlxyXG4gU2hpZnRpbmcgdGhlIGtleWJvYXJkIHRvIHRoZSBsZWZ0IG9yIHJpZ2h0IHVzaW5nIHRoZSBvY3RhdmUgY29udHJvbHNcclxuICovXHJcbmxldCBvY3RhdmVSYW5nZSA9IDE7IC8vIFRoZSBkZWZhdWx0IHN0YXRlXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWN0cmw9XCJvY3RhdmUtbGVmdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIGlmKCAhdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY3RybD1cIm9jdGF2ZS1yaWdodFwiXScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIG9jdGF2ZVJhbmdlKys7XHJcbiAgICAgICAgaWYoIG9jdGF2ZVJhbmdlID4gMSApIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgbW92ZUtleWJvYXJkT2N0YXZlKCdkb3duJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdHJsPVwib2N0YXZlLXJpZ2h0XCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgaWYoICF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdHJsPVwib2N0YXZlLWxlZnRcIl0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICBvY3RhdmVSYW5nZS0tO1xyXG4gICAgICAgIGlmKCBvY3RhdmVSYW5nZSA8IDEgKSB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIG1vdmVLZXlib2FyZE9jdGF2ZSgndXAnKTtcclxuICAgIH1cclxufSk7XHJcbmZ1bmN0aW9uIG1vdmVLZXlib2FyZE9jdGF2ZSggZGlyZWN0aW9uICl7XHJcbiAgICBsZXQgaGFsZlN0ZXA7XHJcbiAgICBpZiggZGlyZWN0aW9uID09PSAndXAnICl7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBoYWxmU3RlcCA9IHBhcnNlSW50KGl0ZW1zW2ldLmRhdGFzZXQuaGFsZikgKyAxMjtcclxuICAgICAgICAgICAgaXRlbXNbaV0uZGF0YXNldC5oYWxmID0gaGFsZjtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaGFsZlN0ZXAgPSBwYXJzZUludChpdGVtc1tpXS5kYXRhc2V0LmhhbGYpIC0gMTI7XHJcbiAgICAgICAgICAgIGl0ZW1zW2ldLmRhdGFzZXQuaGFsZiA9IGhhbGY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFVJIGZyb20gXCIuL3VpX2NvbXBvbmVudHMvVUkuanNcIjtcclxuaW1wb3J0IE9zY2lsbGF0b3IgZnJvbSBcIi4vc3ludGhfY29tcG9uZW50cy9vc2NpbGxhdG9yXCI7XHJcblxyXG5jbGFzcyBTeW50aHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpe1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9ycyA9IFtcclxuICAgICAgICAgICAgbmV3IE9zY2lsbGF0b3IoY29udGV4dCksXHJcbiAgICAgICAgICAgIG5ldyBPc2NpbGxhdG9yKGNvbnRleHQpLFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IE9zY2lsbGF0b3JzKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3NjaWxsYXRvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RnJlcXVlbmN5KGhhbGZTdGVwKXtcclxuICAgICAgICB0aGlzLm9zY2lsbGF0b3JzLmZvckVhY2goZnVuY3Rpb24ob3NjKXtcclxuICAgICAgICAgICAgb3NjLnNldEZyZXF1ZW5jeShoYWxmU3RlcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKXtcclxuICAgICAgICB0aGlzLm9zY2lsbGF0b3JzLmZvckVhY2goZnVuY3Rpb24ob3NjKXtcclxuICAgICAgICAgICAgb3NjLnN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcCgpe1xyXG4gICAgICAgIHRoaXMub3NjaWxsYXRvcnMuZm9yRWFjaChmdW5jdGlvbihvc2Mpe1xyXG4gICAgICAgICAgIG9zYy5zdG9wKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBVSSgpe1xyXG4gICAgICAgIHRoaXMuVUkgPSBuZXcgVUkodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFN5bnRoOyIsImNsYXNzIE9zY2lsbGF0b3J7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KXtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG4gICAgc2V0RnJlcXVlbmN5KGhhbGZTdGVwKXtcclxuICAgICAgICB0aGlzLmZyZXF1ZW5jeSA9IDQ0MCAqICggTWF0aC5wb3coIE1hdGgucG93KDIsIDEvMTIpLCBoYWxmU3RlcCkgKTtcclxuICAgIH1cclxuICAgIHN0YXJ0KCl7XHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9yID0gdGhpcy5jb250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcclxuICAgICAgICB0aGlzLm9zY2lsbGF0b3IuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xyXG4gICAgICAgIHRoaXMub3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSB0aGlzLmZyZXF1ZW5jeTtcclxuICAgICAgICB0aGlzLm9zY2lsbGF0b3Iuc3RhcnQoKTtcclxuICAgIH1cclxuICAgIHN0b3AoKXtcclxuICAgICAgICBpZih0aGlzLm9zY2lsbGF0b3IgIT09IHVuZGVmaW5lZCApXHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvci5zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBzZXQgZ2FpbkNvbXBvbmVudChjb21wb25lbnQpe1xyXG4gICAgICAgIHRoaXMuZ2FpbkNvbnRyb2wgPSBjb21wb25lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE9zY2lsbGF0b3I7IiwiaW1wb3J0IEtub2IgZnJvbSBcIi4va25vYlwiO1xyXG5cclxuY2xhc3MgVUl7XHJcbiAgICBjb25zdHJ1Y3RvcihzeW50aCl7XHJcbiAgICAgICAgdGhpcy5zeW50aCA9IHN5bnRoO1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwS25vYnMoKTtcclxuXHJcbiAgICAgICAgLy8gTW91c2UgdXAgYWx3YXlzIGRpc2FibGVzIGFueSBtb3VzZW1vdmUgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5vbm1vdXNlbW92ZSA9ICcnO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cEtub2JzKCl7XHJcblxyXG4gICAgICAgIGxldCBrbm9iRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jb21wb25lbnQ9XCJrbm9iXCJdJyk7XHJcbiAgICAgICAga25vYkVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XHJcbiAgICAgICAgICAgIGlmKCBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50cGFyZW50ID09PSAnb3NjWzBdJyApXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzBdLmdhaW5Db250cm9sID0gbmV3IEtub2IoZWxlbWVudCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVJOyIsImNsYXNzIFVJX0NvbXBvbmVudF9CYXNle1xyXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVJX0NvbXBvbmVudF9CYXNlOyIsImltcG9ydCBVSV9Db21wb25lbnRfQmFzZSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuY2xhc3MgS25vYiBleHRlbmRzIFVJX0NvbXBvbmVudF9CYXNle1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpe1xyXG4gICAgICAgIHN1cGVyKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YXNldC52YWx1ZSA9ICcwJztcclxuXHJcbiAgICAgICAgdGhpcy5taW5WYWwgPSAwO1xyXG4gICAgICAgIHRoaXMubWF4VmFsID0gMjUwO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEN1cnNvclBvc2l0aW9uID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsID0gdGhpcy5jcmVhdGVEaWFsKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVEaWFsKCl7XHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50T2Zmc2V0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGxldCBkaW1lbnNpb24gPSBlbGVtZW50T2Zmc2V0LndpZHRoICsgMTA7XHJcblxyXG4gICAgICAgIGxldCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBkaW1lbnNpb24udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBkaW1lbnNpb24udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgJzAgMCAnK2RpbWVuc2lvbi50b1N0cmluZygpKycgJytkaW1lbnNpb24udG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIGxldCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAoZGltZW5zaW9uIC8gMikgLSA0O1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N4JywgKGRpbWVuc2lvbiAvMikudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCAoZGltZW5zaW9uIC8yKS50b1N0cmluZygpKTtcclxuICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgcmFkaXVzLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7XHJcblxyXG4gICAgICAgIGxldCBjaXJjdW1mZXJlbmNlID0gKDIgKiBNYXRoLlBJICogcmFkaXVzKTtcclxuICAgICAgICAvL2NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZW5kcG9pbnQnLCAoY2lyY3VtZmVyZW5jZSowLjMzKS50b1N0cmluZygpICk7XHJcblxyXG4gICAgICAgIGNpcmNsZS5zdGFydFBvaW50ID0gY2lyY3VtZmVyZW5jZTtcclxuICAgICAgICBjaXJjbGUuZW5kUG9pbnQgPSAoY2lyY3VtZmVyZW5jZSowLjMzKTtcclxuXHJcbiAgICAgICAgY2lyY3VtZmVyZW5jZSA9IGNpcmN1bWZlcmVuY2UudG9TdHJpbmcoKTtcclxuICAgICAgICAvL2NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhcnRwb2ludCcsIGNpcmN1bWZlcmVuY2UpO1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBjaXJjdW1mZXJlbmNlICsgJyAnICsgY2lyY3VtZmVyZW5jZSk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hvZmZzZXQnLCAocmFkaXVzKjAuMzMpLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzdmcpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2lyY2xlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRTdHlsZSgpe1xyXG4gICAgICAgIGxldCB2YWwgPSB0aGlzLnZhbHVlIC0gKHRoaXMubWF4VmFsIC8gMik7XHJcbiAgICAgICAgICAgIHZhbCA9IFwicm90YXRlKFwiICsgdmFsICsgXCJkZWcpXCI7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHZhbDtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdmFsO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5Nb3pUcmFuc2Zvcm0gPSB2YWw7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLm1zVHJhbnNmb3JtID0gdmFsO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5PVHJhbnNmb3JtID0gdmFsO1xyXG5cclxuICAgICAgICAvLyBHZXQgcGVyY2VudGFnZSBvZiB2YWx1ZVxyXG4gICAgICAgIGxldCB2YWxQZXJjZW50YWdlID0gKCh0aGlzLnZhbHVlIC0gdGhpcy5taW5WYWwpICogMTAwKSAvICh0aGlzLm1heFZhbCAtIHRoaXMubWluVmFsKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGRpYWwgdmFsdWVcclxuICAgICAgICBsZXQgZGlhbFZhbCA9ICh0aGlzLmRpYWwuZW5kUG9pbnQgLSB0aGlzLmRpYWwuc3RhcnRQb2ludCkgKiAoKDEwMC12YWxQZXJjZW50YWdlKSAvIDEwMCApO1xyXG5cclxuICAgICAgICAvLyBTZXQgcGVyY2VudGFnZSBvZiBkaWFsXHJcbiAgICAgICAgdGhpcy5kaWFsLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hvZmZzZXQnLCAodGhpcy5kaWFsLmVuZFBvaW50IC0gZGlhbFZhbCkudG9TdHJpbmcoKSApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZhbHVlKCl7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWxlbWVudE9mZnNldCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnRDZW50ZXIgPSBlbGVtZW50T2Zmc2V0LnRvcCArIChlbGVtZW50T2Zmc2V0LmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3Vyc29yUmVsYXRpdmVUb0NlbnRlciA9IChlbGVtZW50Q2VudGVyIC0gZXZlbnQuY2xpZW50WSkgLyAxNTA7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3Vyc29yUmVsYXRpdmVUb0NlbnRlciA+IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmxhc3RDdXJzb3JQb3NpdGlvbiA8IGN1cnNvclJlbGF0aXZlVG9DZW50ZXIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmFsdWUgPCB0aGlzLm1heFZhbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgKyBjdXJzb3JSZWxhdGl2ZVRvQ2VudGVyO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52YWx1ZSA+IHRoaXMubWluVmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlIC0gY3Vyc29yUmVsYXRpdmVUb0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmxhc3RDdXJzb3JQb3NpdGlvbiA+IGN1cnNvclJlbGF0aXZlVG9DZW50ZXIpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmFsdWUgPiB0aGlzLm1pblZhbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgKyBjdXJzb3JSZWxhdGl2ZVRvQ2VudGVyO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52YWx1ZSA8IHRoaXMubWF4VmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlIC0gY3Vyc29yUmVsYXRpdmVUb0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEN1cnNvclBvc2l0aW9uID0gY3Vyc29yUmVsYXRpdmVUb0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBLbm9iOyJdfQ=="}