{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.js","src/synth.js","src/synth_components/adsr.js","src/synth_components/oscillator.js","src/ui_components/UI.js","src/ui_components/adsr.js","src/ui_components/base.js","src/ui_components/dragInput.js","src/ui_components/knob.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\r\n\r\nimport Synth from './synth.js';\r\n\r\n// Instantiate the Synth\r\n// And link the audio context container\r\nconst synth = new Synth(new ( window.AudioContext || window.webkitAudioContext )());\r\nsynth.setupUI();\r\n\r\n/*\r\n    Getting the note frequencies:\r\n\r\n    The base for calculating the frequencies is 440 Hz, this is a A4- the first\r\n    A note above middle C (C4).\r\n\r\n    All note frequencies are calculated from this point on with the following calculation:\r\n    The base frequency TIMES the twelfth root of two TO THE POWER OF the amount of half steps from A4.\r\n    In short: 440 * (2^(1/12))^h. Where h is the half steps away from A4 (which will be negative if \r\n    we travel to the left on the keyboard).\r\n */\r\nconst ul = document.getElementById(\"keyboard\");\r\nconst items = ul.getElementsByTagName(\"li\");\r\n\r\n// When the user presses down on a keyboard list element\r\n// we will calculate the frequency of the note and play it\r\nfor (let i = 0; i < items.length; ++i) {\r\n    items[i].onmousedown = function(){\r\n        synth.setFrequency(parseInt(this.dataset.half));\r\n        synth.start();\r\n    }\r\n\r\n}\r\n\r\n// On Mouseup we will stop all oscillators, I'm putting this on document.body\r\n// instead of on the list elements because the user can hold down the key while\r\n// still moving the mouse, which messes it all up\r\ndocument.addEventListener('mouseup', function(){\r\n    synth.stop();\r\n});\r\n\r\n/*\r\n Shifting the keyboard to the left or right using the octave controls\r\n */\r\nlet octaveRange = 1; // The default state\r\ndocument.querySelector('[data-ctrl=\"octave-left\"]').addEventListener('click', function(){\r\n    if( !this.classList.contains('active')) {\r\n        document.querySelector('[data-ctrl=\"octave-right\"]').classList.remove('active');\r\n        octaveRange++;\r\n        if( octaveRange > 1 ) this.classList.add('active');\r\n        moveKeyboardOctave('down');\r\n    }\r\n});\r\ndocument.querySelector('[data-ctrl=\"octave-right\"]').addEventListener('click', function(){\r\n    if( !this.classList.contains('active')) {\r\n        document.querySelector('[data-ctrl=\"octave-left\"]').classList.remove('active');\r\n        octaveRange--;\r\n        if( octaveRange < 1 ) this.classList.add('active');\r\n        moveKeyboardOctave('up');\r\n    }\r\n});\r\nfunction moveKeyboardOctave( direction ){\r\n    let halfStep;\r\n    if( direction === 'up' ){\r\n        for (let i = 0; i < items.length; ++i) {\r\n            halfStep = parseInt(items[i].dataset.half) + 12;\r\n            items[i].dataset.half = half;\r\n        }\r\n    } else {\r\n        for (let i = 0; i < items.length; ++i) {\r\n            halfStep = parseInt(items[i].dataset.half) - 12;\r\n            items[i].dataset.half = half;\r\n        }\r\n    }\r\n}","import UI from \"./ui_components/UI.js\";\r\nimport Oscillator from \"./synth_components/oscillator\";\r\nimport ADSR from \"./synth_components/adsr\";\r\n\r\nclass Synth{\r\n    constructor(context){\r\n        this.context = context;\r\n        this.oscillators = [\r\n            new Oscillator(context),\r\n            new Oscillator(context),\r\n        ];\r\n        this.adsr = new ADSR(context);\r\n    }\r\n\r\n    get Oscillators(){\r\n        return this.oscillators;\r\n    }\r\n\r\n    setFrequency(halfStep){\r\n        this.oscillators.forEach(function(osc){\r\n            osc.setFrequency(halfStep);\r\n        });\r\n    }\r\n\r\n    start(){\r\n        this.oscillators.forEach(function(osc){\r\n\r\n            let oscLevel = osc.getLevel();\r\n            osc.create();\r\n\r\n            let attack = (this.adsr.attack / 200);\r\n            let decay = (this.adsr.decay / 100);\r\n\r\n            for( let oscillator of osc.oscillators ){\r\n\r\n                // Starts at 0, ramps up to oscLevel over the time of the attackControl value\r\n                oscillator['gain'].gain.setValueAtTime(0.001, this.context.currentTime);\r\n\r\n                let sustain = this.adsr.getSustain();\r\n                sustain = (oscLevel * sustain) / osc.oscillators.length;\r\n                if ( sustain < 0.002 ) sustain = 0.001;\r\n\r\n                oscillator['gain'].gain.exponentialRampToValueAtTime(oscLevel, this.context.currentTime + attack);\r\n                oscillator['gain'].gain.exponentialRampToValueAtTime(sustain, (this.context.currentTime + attack) + decay);\r\n            }\r\n\r\n        }.bind(this));\r\n\r\n        // Play the oscillators\r\n        this.oscillators.forEach(function(osc){\r\n            for( let oscillator of osc.oscillators ){\r\n                oscillator['osc'].start();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    stop(){\r\n        let release = (this.adsr.release / 200);\r\n\r\n        this.oscillators.forEach(function(osc){\r\n            osc.stop(this.context.currentTime + release, this.adsr.sustain);\r\n        }.bind(this));\r\n    }\r\n\r\n    setupUI(){\r\n        this.UI = new UI(this);\r\n    }\r\n}\r\n\r\nexport default Synth;","class ADSR{\r\n    constructor(context){\r\n        this.context = context;\r\n    }\r\n\r\n    setValues() {\r\n        this.attack = parseInt(this.attackControl.value);\r\n        this.decay = parseInt(this.decayControl.value);\r\n        this.sustain = parseInt(this.sustainControl.value);\r\n        this.release = parseInt(this.releaseControl.value);\r\n    }\r\n\r\n    getSustain(){\r\n        let sustainVal = ((this.sustain * 100) / 250) / 100;\r\n        if (sustainVal > 0){\r\n            if ( sustainVal > 1 ) return 1;\r\n            else return sustainVal;\r\n        }\r\n        else return 0.001;\r\n    }\r\n\r\n    set attackComponent(component){\r\n        this.attackControl = component;\r\n    }\r\n    set decayComponent(component){\r\n        this.decayControl = component;\r\n    }\r\n    set sustainComponent(component){\r\n        this.sustainControl = component;\r\n    }\r\n    set releaseComponent(component){\r\n        this.releaseControl = component;\r\n    }\r\n}\r\n\r\nexport default ADSR;","class Oscillator{\r\n    constructor(context){\r\n        this.context = context;\r\n    }\r\n    setFrequency(halfStep){\r\n        this.frequency = 440 * ( Math.pow( Math.pow(2, 1/12), (halfStep + this.pitchControl.value)) );\r\n    }\r\n    getLevel(){\r\n        let oscLevel = ((((this.gainControl.value - this.gainControl.minVal) * 100) / (this.gainControl.maxVal - this.gainControl.minVal )/ 100) / this.voicesControl.value);\r\n        if( oscLevel > 0 ) return oscLevel\r\n        else return 0.001;\r\n    }\r\n    create(){\r\n\r\n        this.oscillators = [];\r\n\r\n        // Create Oscillators depending on how many voices\r\n        for( let i = 0; i < this.voicesControl.value; i++ ){\r\n\r\n            this.oscillators[i] = [];\r\n\r\n            // Create the gain node\r\n            this.oscillators[i]['gain'] = this.context.createGain();\r\n            this.oscillators[i]['gain'].connect(this.context.destination);\r\n\r\n            // Create the oscillator\r\n            this.oscillators[i]['osc'] = this.context.createOscillator();\r\n            this.oscillators[i]['osc'].connect(this.oscillators[i]['gain']);\r\n            this.oscillators[i]['osc'].frequency.value = this.frequency;\r\n            this.oscillators[i]['osc'].type = this.waveformControl.value;\r\n\r\n        }\r\n\r\n        // Detune depending on the detune control value\r\n        if( this.oscillators.length > 0 ){\r\n            let detune = this.detuneControl.value / 15;\r\n            let oscBreadth = (this.voicesControl.value - 1) * detune;\r\n            this.oscillators.forEach(function(osc, index){\r\n                osc['osc'].frequency.value = (this.frequency  - (oscBreadth / 2)) + ( index *detune );\r\n            }.bind(this));\r\n        }\r\n\r\n    }\r\n    stop(when, sustain){\r\n        if(this.oscillators !== undefined ){\r\n            for( let osc of this.oscillators ){\r\n                osc['gain'].gain.exponentialRampToValueAtTime(0.01, when);\r\n                osc['osc'].stop(when);\r\n            }\r\n        }\r\n    }\r\n    set detuneComponent(component){\r\n        this.detuneControl = component;\r\n    }\r\n    set gainComponent(component){\r\n        this.gainControl = component;\r\n    }\r\n    set pitchComponent(component){\r\n        this.pitchControl = component;\r\n    }\r\n    set voicesComponent(component){\r\n        this.voicesControl = component;\r\n    }\r\n    set waveformComponent(component){\r\n        this.waveformControl = component;\r\n    }\r\n}\r\n\r\nexport default Oscillator;","import Knob from \"./knob\";\r\nimport dragInput from './dragInput';\r\nimport ADSR_Graphic from \"./../ui_components/adsr\";\r\n\r\nclass UI{\r\n    constructor(synth){\r\n        this.synth = synth;\r\n\r\n        this.setupKnobs();\r\n        this.setupDragInput();\r\n        this.setupSelect();\r\n\r\n        this.setupADSR_Graphic();\r\n\r\n        // Mouse up always disables any mousemove event handlers\r\n        document.addEventListener('mouseup', function(){\r\n            document.body.onmousemove = '';\r\n        }.bind(this));\r\n    }\r\n\r\n    setupKnobs(){\r\n        let knobElements = document.querySelectorAll('[data-component=\"knob\"]');\r\n        knobElements.forEach(function(element){\r\n            if( element.dataset.componentparent === 'osc[0]' ){\r\n                switch( element.dataset.componentcontrol ){\r\n                    case 'level':\r\n                        this.synth.Oscillators[0].gainComponent = new Knob(element);\r\n                        break;\r\n                    case 'detune':\r\n                        this.synth.Oscillators[0].detuneComponent = new Knob(element);\r\n                        break;\r\n                }\r\n            }\r\n            if( element.dataset.componentparent === 'osc[1]' ){\r\n                switch( element.dataset.componentcontrol ){\r\n                    case 'level':\r\n                        this.synth.Oscillators[1].gainComponent = new Knob(element);\r\n                        break;\r\n                    case 'detune':\r\n                        this.synth.Oscillators[1].detuneComponent = new Knob(element);\r\n                        break;\r\n                }\r\n            }\r\n            if( element.dataset.componentparent === 'adsr' ){\r\n                switch( element.dataset.componentcontrol ){\r\n                    case 'attack':\r\n                        this.synth.adsr.attackComponent = new Knob(element);\r\n                        break;\r\n                    case 'decay':\r\n                        this.synth.adsr.decayComponent = new Knob(element);\r\n                        break;\r\n                    case 'sustain':\r\n                        this.synth.adsr.sustainComponent = new Knob(element);\r\n                        break;\r\n                    case 'release':\r\n                        this.synth.adsr.releaseComponent = new Knob(element);\r\n                        break;\r\n                }\r\n            }\r\n            if( element.dataset.componentparent === 'filter' ){\r\n\r\n            }\r\n        }.bind(this));\r\n\r\n    }\r\n\r\n    setupDragInput(){\r\n        let dragInputElements = document.querySelectorAll('[data-component=\"dragInput\"]');\r\n        dragInputElements.forEach(function(element){\r\n            if( element.dataset.componentparent === 'osc[0]' ) {\r\n                switch (element.dataset.componentcontrol) {\r\n                    case 'pitch':\r\n                        this.synth.Oscillators[0].pitchComponent = new dragInput(element);\r\n                        break;\r\n                    case 'voices':\r\n                        this.synth.Oscillators[0].voicesComponent = new dragInput(element);\r\n                        break;\r\n                }\r\n            }\r\n            if( element.dataset.componentparent === 'osc[1]' ) {\r\n                switch (element.dataset.componentcontrol) {\r\n                    case 'pitch':\r\n                        this.synth.Oscillators[1].pitchComponent = new dragInput(element);\r\n                        break;\r\n                    case 'voices':\r\n                        this.synth.Oscillators[1].voicesComponent = new dragInput(element);\r\n                        break;\r\n                }\r\n            }\r\n        }.bind(this));\r\n    }\r\n\r\n    setupSelect(){\r\n        let selects = document.querySelectorAll('select.waveformSelect');\r\n        selects.forEach(function(element){\r\n            if( element.dataset.componentparent === 'osc[0]' ) {\r\n                this.synth.Oscillators[0].waveformComponent = element;\r\n            }\r\n            if( element.dataset.componentparent === 'osc[1]' ) {\r\n                this.synth.Oscillators[1].waveformComponent = element;\r\n            }\r\n        }.bind(this));\r\n    }\r\n\r\n    setupADSR_Graphic(){\r\n        this.adsr_graphic = new ADSR_Graphic(this.synth.adsr, document.querySelector('svg#adsrGraphic'));\r\n        this.synth.adsr.setValues();\r\n        this.adsr_graphic.updateGraphic();\r\n    }\r\n}\r\n\r\nexport default UI;","class ADSR_Graphic{\r\n    constructor(component, graphic){\r\n        this.synthComponent = component;\r\n        this.graphic = graphic;\r\n\r\n        let graphicSize = graphic.getBoundingClientRect();\r\n        this.height = graphicSize.height;\r\n        this.width = graphicSize.width;\r\n\r\n        this.path = graphic.querySelector('path');\r\n\r\n        this.synthComponent.attackControl.afterUpdate = function(){\r\n            this.updateGraphic();\r\n        }.bind(this);\r\n        this.synthComponent.decayControl.afterUpdate = function(){\r\n            this.updateGraphic();\r\n        }.bind(this);\r\n        this.synthComponent.sustainControl.afterUpdate = function(){\r\n            this.updateGraphic();\r\n        }.bind(this);\r\n        this.synthComponent.releaseControl.afterUpdate = function(){\r\n            this.updateGraphic();\r\n        }.bind(this);\r\n    }\r\n\r\n    updateGraphic(){\r\n\r\n        this.synthComponent.setValues();\r\n\r\n        let draw = '';\r\n\r\n        let attack = (this.synthComponent.attackControl.value * 1.25);\r\n        let decay = (this.synthComponent.decayControl.value * 1.25);\r\n        let sustain = (((this.synthComponent.sustainControl.value * 100) / (250)) / 100);\r\n        sustain = this.height - (sustain * this.height);\r\n        if (sustain < 2) sustain = 1;\r\n        else if (sustain > ( this.height - 1 ) ) sustain = this.height - 1;\r\n        let release = this.synthComponent.releaseControl.value;\r\n\r\n        draw += 'M1,' + this.height + ' ';\r\n\r\n        // Attack (starts from lower left corner)\r\n        if ( attack < 1 )\r\n            draw += 'L1,1';\r\n        else\r\n            draw += 'Q1,1 ' + attack + ',1';\r\n\r\n        // Decay (starts where attack ends with a curve downwards towards the sustain level)\r\n        if ( decay < 1 )\r\n            draw += 'L' + attack + ',' + sustain;\r\n        else\r\n            draw += 'Q' + attack + ',' + sustain + ' ' + (decay + attack) + ',' + sustain;\r\n\r\n        // Sustain\r\n        draw += 'L' + 700 + ',' + sustain;\r\n\r\n        // Release\r\n        draw += 'Q' + 700 + ',' + (this.height - 1) + ' ' + (700 + release) + ',' + (this.height - 1);\r\n\r\n        // Add to svg\r\n        this.path.setAttribute('d', draw);\r\n\r\n    }\r\n}\r\n\r\nexport default ADSR_Graphic;","class UI_Component_Base{\r\n    constructor(element){\r\n        this.element = element;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default UI_Component_Base;","import UI_Component_Base from './base';\r\n\r\nclass dragInput extends UI_Component_Base{\r\n\r\n    constructor(element){\r\n        super(element);\r\n\r\n        this.value = parseInt(element.getAttribute('value'));\r\n        this.previousValue = 0;\r\n        this.minVal = parseInt(element.getAttribute('data-minVal'));\r\n        this.maxVal = parseInt(element.getAttribute('data-maxVal'));\r\n\r\n        this.element.onmousedown = function(){\r\n            this.previousValue = this.value;\r\n            this.updateValue();\r\n        }.bind(this);\r\n\r\n        this.setStyle();\r\n    }\r\n\r\n    updateValue(){\r\n        document.body.onmousemove = function(event) {\r\n\r\n            let elementOffset = this.element.getBoundingClientRect();\r\n            let elementCenter = elementOffset.top + (elementOffset.height / 2);\r\n            let cursorRelativeToCenter = (elementCenter - event.clientY) / 15;\r\n\r\n            let rounded = Math.round(this.previousValue + cursorRelativeToCenter);\r\n            if (rounded >= this.minVal && rounded <= this.maxVal)\r\n                this.value = rounded;\r\n\r\n            this.setStyle();\r\n\r\n        }.bind(this);\r\n    }\r\n\r\n    setStyle(){\r\n        this.element.value = this.value;\r\n    }\r\n\r\n}\r\n\r\nexport default dragInput;","import UI_Component_Base from './base';\r\n\r\nclass Knob extends UI_Component_Base{\r\n\r\n    constructor(element){\r\n        super(element);\r\n\r\n        this._afterUpdate = null;\r\n\r\n        this.minVal = 0;\r\n        this.maxVal = 250;\r\n        this.value = parseInt(this.element.dataset.value);\r\n        this.lastCursorPosition = 0;\r\n\r\n        this.dial = this.createDial();\r\n\r\n        this.setStyle();\r\n\r\n        this.element.onmousedown = function(){\r\n            this.updateValue();\r\n        }.bind(this);\r\n    }\r\n\r\n    set afterUpdate(event){\r\n        this._afterUpdate = event;\r\n    }\r\n\r\n    createDial(){\r\n\r\n        let elementOffset = this.element.getBoundingClientRect();\r\n        let dimension = elementOffset.width + 10;\r\n\r\n        let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svg.setAttribute(\"width\", dimension.toString());\r\n        svg.setAttribute(\"height\", dimension.toString());\r\n        svg.setAttribute(\"viewBox\", '0 0 '+dimension.toString()+' '+dimension.toString());\r\n\r\n        let circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        let radius = (dimension / 2) - 4;\r\n        circle.setAttribute('cx', (dimension /2).toString());\r\n        circle.setAttribute('cy', (dimension /2).toString());\r\n        circle.setAttribute('r', radius.toString());\r\n        circle.setAttribute('fill', 'none');\r\n        circle.setAttribute('stroke', 'black');\r\n        circle.setAttribute('stroke-width', '1');\r\n\r\n        let circumference = (2 * Math.PI * radius);\r\n\r\n        circle.startPoint = circumference;\r\n        circle.endPoint = (circumference*0.33);\r\n\r\n        circumference = circumference.toString();\r\n        circle.setAttribute('stroke-dasharray', circumference + ' ' + circumference);\r\n        circle.setAttribute('stroke-dashoffset', (radius*0.33).toString());\r\n\r\n        svg.appendChild(circle);\r\n        this.element.parentNode.appendChild(svg);\r\n\r\n        return circle;\r\n\r\n    }\r\n\r\n    setStyle(){\r\n        let val = this.value - (this.maxVal / 2);\r\n            val = \"rotate(\" + val + \"deg)\";\r\n        this.element.style.transform = val;\r\n        this.element.style.webkitTransform = val;\r\n        this.element.style.MozTransform = val;\r\n        this.element.style.msTransform = val;\r\n        this.element.style.OTransform = val;\r\n\r\n        // Get percentage of value\r\n        let valPercentage = ((this.value - this.minVal) * 100) / (this.maxVal - this.minVal);\r\n\r\n        // Get dial value\r\n        let dialVal = (this.dial.endPoint - this.dial.startPoint) * ((100-valPercentage) / 100 );\r\n\r\n        // Set percentage of dial\r\n        this.dial.setAttribute('stroke-dashoffset', (this.dial.endPoint - dialVal).toString() );\r\n\r\n        if( this._afterUpdate )\r\n            this._afterUpdate();\r\n\r\n    }\r\n\r\n    updateValue(){\r\n        document.body.onmousemove = function(event) {\r\n\r\n            let elementOffset = this.element.getBoundingClientRect();\r\n            let elementCenter = elementOffset.top + (elementOffset.height / 2);\r\n            let cursorRelativeToCenter = (elementCenter - event.clientY) / 20;\r\n\r\n            if (cursorRelativeToCenter > 0 ) {\r\n\r\n                if ((this.lastCursorPosition < cursorRelativeToCenter) &&\r\n                    (this.value <= this.maxVal))\r\n                    this.value = this.value + cursorRelativeToCenter;\r\n                else if (this.value >= this.minVal)\r\n                    this.value = this.value - cursorRelativeToCenter;\r\n\r\n            } else {\r\n\r\n                if ((this.lastCursorPosition > cursorRelativeToCenter) &&\r\n                    (this.value >= this.minVal))\r\n                    this.value = this.value + cursorRelativeToCenter;\r\n                else if (this.value <= this.maxVal)\r\n                    this.value = this.value - cursorRelativeToCenter;\r\n\r\n            }\r\n\r\n            this.lastCursorPosition = cursorRelativeToCenter;\r\n\r\n            this.setStyle();\r\n\r\n        }.bind(this);\r\n    }\r\n}\r\n\r\nexport default Knob;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi5qcyIsInNyYy9zeW50aC5qcyIsInNyYy9zeW50aF9jb21wb25lbnRzL2Fkc3IuanMiLCJzcmMvc3ludGhfY29tcG9uZW50cy9vc2NpbGxhdG9yLmpzIiwic3JjL3VpX2NvbXBvbmVudHMvVUkuanMiLCJzcmMvdWlfY29tcG9uZW50cy9hZHNyLmpzIiwic3JjL3VpX2NvbXBvbmVudHMvYmFzZS5qcyIsInNyYy91aV9jb21wb25lbnRzL2RyYWdJbnB1dC5qcyIsInNyYy91aV9jb21wb25lbnRzL2tub2IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUFFQTs7Ozs7O0FBRUE7QUFDQTtBQUNBLElBQU0sUUFBUSxvQkFBVSxLQUFNLE9BQU8sWUFBUCxJQUF1QixPQUFPLGtCQUFwQyxHQUFWLENBQWQ7QUFDQSxNQUFNLE9BQU47O0FBRUE7Ozs7Ozs7Ozs7O0FBV0EsSUFBTSxLQUFLLFNBQVMsY0FBVCxDQUF3QixVQUF4QixDQUFYO0FBQ0EsSUFBTSxRQUFRLEdBQUcsb0JBQUgsQ0FBd0IsSUFBeEIsQ0FBZDs7QUFFQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLE1BQU0sTUFBMUIsRUFBa0MsRUFBRSxDQUFwQyxFQUF1QztBQUNuQyxVQUFNLENBQU4sRUFBUyxXQUFULEdBQXVCLFlBQVU7QUFDN0IsY0FBTSxZQUFOLENBQW1CLFNBQVMsS0FBSyxPQUFMLENBQWEsSUFBdEIsQ0FBbkI7QUFDQSxjQUFNLEtBQU47QUFDSCxLQUhEO0FBS0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBVCxDQUEwQixTQUExQixFQUFxQyxZQUFVO0FBQzNDLFVBQU0sSUFBTjtBQUNILENBRkQ7O0FBSUE7OztBQUdBLElBQUksY0FBYyxDQUFsQixDLENBQXFCO0FBQ3JCLFNBQVMsYUFBVCxDQUF1QiwyQkFBdkIsRUFBb0QsZ0JBQXBE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YyxLQUFLLE1BRHhCLEVBRUksS0FBSyxLQUFMLEdBQWEsS0FBSyxLQUFMLEdBQWEsc0JBQTFCLENBRkosS0FHSyxJQUFJLEtBQUssS0FBTCxJQUFjLEtBQUssTUFBdkIsRUFDRCxLQUFLLEtBQUwsR0FBYSxLQUFLLEtBQUwsR0FBYSxzQkFBMUI7QUFFUCxpQ0FSRCxNQVFPOztBQUVILDRDQUFLLEtBQUssa0JBQUwsR0FBMEIsc0JBQTNCLElBQ0MsS0FBSyxLQUFMLElBQWMsS0FBSyxNQUR4QixFQUVJLEtBQUssS0FBTCxHQUFhLEtBQUssS0FBTCxHQUFhLHNCQUExQixDQUZKLEtBR0ssSUFBSSxLQUFLLEtBQUwsSUFBYyxLQUFLLE1BQXZCLEVBQ0QsS0FBSyxLQUFMLEdBQWEsS0FBSyxLQUFMLEdBQWEsc0JBQTFCO0FBRVA7O0FBRUQscUNBQUssa0JBQUwsR0FBMEIsc0JBQTFCOztBQUVBLHFDQUFLLFFBQUw7QUFFSCx5QkE1QjJCLENBNEIxQixJQTVCMEIsQ0E0QnJCLElBNUJxQixDQUE1QjtBQTZCSDs7O2tDQTVGZSxLLEVBQU07QUFDbEIsNkJBQUssWUFBTCxHQUFvQixLQUFwQjtBQUNIOzs7Ozs7a0JBNkZVLEkiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgU3ludGggZnJvbSAnLi9zeW50aC5qcyc7XHJcblxyXG4vLyBJbnN0YW50aWF0ZSB0aGUgU3ludGhcclxuLy8gQW5kIGxpbmsgdGhlIGF1ZGlvIGNvbnRleHQgY29udGFpbmVyXHJcbmNvbnN0IHN5bnRoID0gbmV3IFN5bnRoKG5ldyAoIHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCApKCkpO1xyXG5zeW50aC5zZXR1cFVJKCk7XHJcblxyXG4vKlxyXG4gICAgR2V0dGluZyB0aGUgbm90ZSBmcmVxdWVuY2llczpcclxuXHJcbiAgICBUaGUgYmFzZSBmb3IgY2FsY3VsYXRpbmcgdGhlIGZyZXF1ZW5jaWVzIGlzIDQ0MCBIeiwgdGhpcyBpcyBhIEE0LSB0aGUgZmlyc3RcclxuICAgIEEgbm90ZSBhYm92ZSBtaWRkbGUgQyAoQzQpLlxyXG5cclxuICAgIEFsbCBub3RlIGZyZXF1ZW5jaWVzIGFyZSBjYWxjdWxhdGVkIGZyb20gdGhpcyBwb2ludCBvbiB3aXRoIHRoZSBmb2xsb3dpbmcgY2FsY3VsYXRpb246XHJcbiAgICBUaGUgYmFzZSBmcmVxdWVuY3kgVElNRVMgdGhlIHR3ZWxmdGggcm9vdCBvZiB0d28gVE8gVEhFIFBPV0VSIE9GIHRoZSBhbW91bnQgb2YgaGFsZiBzdGVwcyBmcm9tIEE0LlxyXG4gICAgSW4gc2hvcnQ6IDQ0MCAqICgyXigxLzEyKSleaC4gV2hlcmUgaCBpcyB0aGUgaGFsZiBzdGVwcyBhd2F5IGZyb20gQTQgKHdoaWNoIHdpbGwgYmUgbmVnYXRpdmUgaWYgXHJcbiAgICB3ZSB0cmF2ZWwgdG8gdGhlIGxlZnQgb24gdGhlIGtleWJvYXJkKS5cclxuICovXHJcbmNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJrZXlib2FyZFwiKTtcclxuY29uc3QgaXRlbXMgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpXCIpO1xyXG5cclxuLy8gV2hlbiB0aGUgdXNlciBwcmVzc2VzIGRvd24gb24gYSBrZXlib2FyZCBsaXN0IGVsZW1lbnRcclxuLy8gd2Ugd2lsbCBjYWxjdWxhdGUgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgbm90ZSBhbmQgcGxheSBpdFxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICBpdGVtc1tpXS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc3ludGguc2V0RnJlcXVlbmN5KHBhcnNlSW50KHRoaXMuZGF0YXNldC5oYWxmKSk7XHJcbiAgICAgICAgc3ludGguc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8vIE9uIE1vdXNldXAgd2Ugd2lsbCBzdG9wIGFsbCBvc2NpbGxhdG9ycywgSSdtIHB1dHRpbmcgdGhpcyBvbiBkb2N1bWVudC5ib2R5XHJcbi8vIGluc3RlYWQgb2Ygb24gdGhlIGxpc3QgZWxlbWVudHMgYmVjYXVzZSB0aGUgdXNlciBjYW4gaG9sZCBkb3duIHRoZSBrZXkgd2hpbGVcclxuLy8gc3RpbGwgbW92aW5nIHRoZSBtb3VzZSwgd2hpY2ggbWVzc2VzIGl0IGFsbCB1cFxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oKXtcclxuICAgIHN5bnRoLnN0b3AoKTtcclxufSk7XHJcblxyXG4vKlxyXG4gU2hpZnRpbmcgdGhlIGtleWJvYXJkIHRvIHRoZSBsZWZ0IG9yIHJpZ2h0IHVzaW5nIHRoZSBvY3RhdmUgY29udHJvbHNcclxuICovXHJcbmxldCBvY3RhdmVSYW5nZSA9IDE7IC8vIFRoZSBkZWZhdWx0IHN0YXRlXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWN0cmw9XCJvY3RhdmUtbGVmdFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIGlmKCAhdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY3RybD1cIm9jdGF2ZS1yaWdodFwiXScpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIG9jdGF2ZVJhbmdlKys7XHJcbiAgICAgICAgaWYoIG9jdGF2ZVJhbmdlID4gMSApIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgbW92ZUtleWJvYXJkT2N0YXZlKCdkb3duJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdHJsPVwib2N0YXZlLXJpZ2h0XCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgaWYoICF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdHJsPVwib2N0YXZlLWxlZnRcIl0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICBvY3RhdmVSYW5nZS0tO1xyXG4gICAgICAgIGlmKCBvY3RhdmVSYW5nZSA8IDEgKSB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIG1vdmVLZXlib2FyZE9jdGF2ZSgndXAnKTtcclxuICAgIH1cclxufSk7XHJcbmZ1bmN0aW9uIG1vdmVLZXlib2FyZE9jdGF2ZSggZGlyZWN0aW9uICl7XHJcbiAgICBsZXQgaGFsZlN0ZXA7XHJcbiAgICBpZiggZGlyZWN0aW9uID09PSAndXAnICl7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBoYWxmU3RlcCA9IHBhcnNlSW50KGl0ZW1zW2ldLmRhdGFzZXQuaGFsZikgKyAxMjtcclxuICAgICAgICAgICAgaXRlbXNbaV0uZGF0YXNldC5oYWxmID0gaGFsZjtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaGFsZlN0ZXAgPSBwYXJzZUludChpdGVtc1tpXS5kYXRhc2V0LmhhbGYpIC0gMTI7XHJcbiAgICAgICAgICAgIGl0ZW1zW2ldLmRhdGFzZXQuaGFsZiA9IGhhbGY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFVJIGZyb20gXCIuL3VpX2NvbXBvbmVudHMvVUkuanNcIjtcclxuaW1wb3J0IE9zY2lsbGF0b3IgZnJvbSBcIi4vc3ludGhfY29tcG9uZW50cy9vc2NpbGxhdG9yXCI7XHJcbmltcG9ydCBBRFNSIGZyb20gXCIuL3N5bnRoX2NvbXBvbmVudHMvYWRzclwiO1xyXG5cclxuY2xhc3MgU3ludGh7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KXtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHRoaXMub3NjaWxsYXRvcnMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBPc2NpbGxhdG9yKGNvbnRleHQpLFxyXG4gICAgICAgICAgICBuZXcgT3NjaWxsYXRvcihjb250ZXh0KSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMuYWRzciA9IG5ldyBBRFNSKGNvbnRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBPc2NpbGxhdG9ycygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9zY2lsbGF0b3JzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEZyZXF1ZW5jeShoYWxmU3RlcCl7XHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKG9zYyl7XHJcbiAgICAgICAgICAgIG9zYy5zZXRGcmVxdWVuY3koaGFsZlN0ZXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCl7XHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKG9zYyl7XHJcblxyXG4gICAgICAgICAgICBsZXQgb3NjTGV2ZWwgPSBvc2MuZ2V0TGV2ZWwoKTtcclxuICAgICAgICAgICAgb3NjLmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGF0dGFjayA9ICh0aGlzLmFkc3IuYXR0YWNrIC8gMjAwKTtcclxuICAgICAgICAgICAgbGV0IGRlY2F5ID0gKHRoaXMuYWRzci5kZWNheSAvIDEwMCk7XHJcblxyXG4gICAgICAgICAgICBmb3IoIGxldCBvc2NpbGxhdG9yIG9mIG9zYy5vc2NpbGxhdG9ycyApe1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0cyBhdCAwLCByYW1wcyB1cCB0byBvc2NMZXZlbCBvdmVyIHRoZSB0aW1lIG9mIHRoZSBhdHRhY2tDb250cm9sIHZhbHVlXHJcbiAgICAgICAgICAgICAgICBvc2NpbGxhdG9yWydnYWluJ10uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjAwMSwgdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc3VzdGFpbiA9IHRoaXMuYWRzci5nZXRTdXN0YWluKCk7XHJcbiAgICAgICAgICAgICAgICBzdXN0YWluID0gKG9zY0xldmVsICogc3VzdGFpbikgLyBvc2Mub3NjaWxsYXRvcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzdXN0YWluIDwgMC4wMDIgKSBzdXN0YWluID0gMC4wMDE7XHJcblxyXG4gICAgICAgICAgICAgICAgb3NjaWxsYXRvclsnZ2FpbiddLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShvc2NMZXZlbCwgdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lICsgYXR0YWNrKTtcclxuICAgICAgICAgICAgICAgIG9zY2lsbGF0b3JbJ2dhaW4nXS5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoc3VzdGFpbiwgKHRoaXMuY29udGV4dC5jdXJyZW50VGltZSArIGF0dGFjaykgKyBkZWNheSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gUGxheSB0aGUgb3NjaWxsYXRvcnNcclxuICAgICAgICB0aGlzLm9zY2lsbGF0b3JzLmZvckVhY2goZnVuY3Rpb24ob3NjKXtcclxuICAgICAgICAgICAgZm9yKCBsZXQgb3NjaWxsYXRvciBvZiBvc2Mub3NjaWxsYXRvcnMgKXtcclxuICAgICAgICAgICAgICAgIG9zY2lsbGF0b3JbJ29zYyddLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RvcCgpe1xyXG4gICAgICAgIGxldCByZWxlYXNlID0gKHRoaXMuYWRzci5yZWxlYXNlIC8gMjAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKG9zYyl7XHJcbiAgICAgICAgICAgIG9zYy5zdG9wKHRoaXMuY29udGV4dC5jdXJyZW50VGltZSArIHJlbGVhc2UsIHRoaXMuYWRzci5zdXN0YWluKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHVwVUkoKXtcclxuICAgICAgICB0aGlzLlVJID0gbmV3IFVJKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTeW50aDsiLCJjbGFzcyBBRFNSe1xyXG4gICAgY29uc3RydWN0b3IoY29udGV4dCl7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSBwYXJzZUludCh0aGlzLmF0dGFja0NvbnRyb2wudmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGVjYXkgPSBwYXJzZUludCh0aGlzLmRlY2F5Q29udHJvbC52YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5zdXN0YWluID0gcGFyc2VJbnQodGhpcy5zdXN0YWluQ29udHJvbC52YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlID0gcGFyc2VJbnQodGhpcy5yZWxlYXNlQ29udHJvbC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3VzdGFpbigpe1xyXG4gICAgICAgIGxldCBzdXN0YWluVmFsID0gKCh0aGlzLnN1c3RhaW4gKiAxMDApIC8gMjUwKSAvIDEwMDtcclxuICAgICAgICBpZiAoc3VzdGFpblZhbCA+IDApe1xyXG4gICAgICAgICAgICBpZiAoIHN1c3RhaW5WYWwgPiAxICkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHN1c3RhaW5WYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgcmV0dXJuIDAuMDAxO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhdHRhY2tDb21wb25lbnQoY29tcG9uZW50KXtcclxuICAgICAgICB0aGlzLmF0dGFja0NvbnRyb2wgPSBjb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXQgZGVjYXlDb21wb25lbnQoY29tcG9uZW50KXtcclxuICAgICAgICB0aGlzLmRlY2F5Q29udHJvbCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldCBzdXN0YWluQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy5zdXN0YWluQ29udHJvbCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldCByZWxlYXNlQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy5yZWxlYXNlQ29udHJvbCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQURTUjsiLCJjbGFzcyBPc2NpbGxhdG9ye1xyXG4gICAgY29uc3RydWN0b3IoY29udGV4dCl7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuICAgIHNldEZyZXF1ZW5jeShoYWxmU3RlcCl7XHJcbiAgICAgICAgdGhpcy5mcmVxdWVuY3kgPSA0NDAgKiAoIE1hdGgucG93KCBNYXRoLnBvdygyLCAxLzEyKSwgKGhhbGZTdGVwICsgdGhpcy5waXRjaENvbnRyb2wudmFsdWUpKSApO1xyXG4gICAgfVxyXG4gICAgZ2V0TGV2ZWwoKXtcclxuICAgICAgICBsZXQgb3NjTGV2ZWwgPSAoKCgodGhpcy5nYWluQ29udHJvbC52YWx1ZSAtIHRoaXMuZ2FpbkNvbnRyb2wubWluVmFsKSAqIDEwMCkgLyAodGhpcy5nYWluQ29udHJvbC5tYXhWYWwgLSB0aGlzLmdhaW5Db250cm9sLm1pblZhbCApLyAxMDApIC8gdGhpcy52b2ljZXNDb250cm9sLnZhbHVlKTtcclxuICAgICAgICBpZiggb3NjTGV2ZWwgPiAwICkgcmV0dXJuIG9zY0xldmVsXHJcbiAgICAgICAgZWxzZSByZXR1cm4gMC4wMDE7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoKXtcclxuXHJcbiAgICAgICAgdGhpcy5vc2NpbGxhdG9ycyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgT3NjaWxsYXRvcnMgZGVwZW5kaW5nIG9uIGhvdyBtYW55IHZvaWNlc1xyXG4gICAgICAgIGZvciggbGV0IGkgPSAwOyBpIDwgdGhpcy52b2ljZXNDb250cm9sLnZhbHVlOyBpKysgKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcnNbaV0gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlXHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcnNbaV1bJ2dhaW4nXSA9IHRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcnNbaV1bJ2dhaW4nXS5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG9zY2lsbGF0b3JcclxuICAgICAgICAgICAgdGhpcy5vc2NpbGxhdG9yc1tpXVsnb3NjJ10gPSB0aGlzLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xyXG4gICAgICAgICAgICB0aGlzLm9zY2lsbGF0b3JzW2ldWydvc2MnXS5jb25uZWN0KHRoaXMub3NjaWxsYXRvcnNbaV1bJ2dhaW4nXSk7XHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcnNbaV1bJ29zYyddLmZyZXF1ZW5jeS52YWx1ZSA9IHRoaXMuZnJlcXVlbmN5O1xyXG4gICAgICAgICAgICB0aGlzLm9zY2lsbGF0b3JzW2ldWydvc2MnXS50eXBlID0gdGhpcy53YXZlZm9ybUNvbnRyb2wudmFsdWU7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGV0dW5lIGRlcGVuZGluZyBvbiB0aGUgZGV0dW5lIGNvbnRyb2wgdmFsdWVcclxuICAgICAgICBpZiggdGhpcy5vc2NpbGxhdG9ycy5sZW5ndGggPiAwICl7XHJcbiAgICAgICAgICAgIGxldCBkZXR1bmUgPSB0aGlzLmRldHVuZUNvbnRyb2wudmFsdWUgLyAxNTtcclxuICAgICAgICAgICAgbGV0IG9zY0JyZWFkdGggPSAodGhpcy52b2ljZXNDb250cm9sLnZhbHVlIC0gMSkgKiBkZXR1bmU7XHJcbiAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcnMuZm9yRWFjaChmdW5jdGlvbihvc2MsIGluZGV4KXtcclxuICAgICAgICAgICAgICAgIG9zY1snb3NjJ10uZnJlcXVlbmN5LnZhbHVlID0gKHRoaXMuZnJlcXVlbmN5ICAtIChvc2NCcmVhZHRoIC8gMikpICsgKCBpbmRleCAqZGV0dW5lICk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIHN0b3Aod2hlbiwgc3VzdGFpbil7XHJcbiAgICAgICAgaWYodGhpcy5vc2NpbGxhdG9ycyAhPT0gdW5kZWZpbmVkICl7XHJcbiAgICAgICAgICAgIGZvciggbGV0IG9zYyBvZiB0aGlzLm9zY2lsbGF0b3JzICl7XHJcbiAgICAgICAgICAgICAgICBvc2NbJ2dhaW4nXS5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgd2hlbik7XHJcbiAgICAgICAgICAgICAgICBvc2NbJ29zYyddLnN0b3Aod2hlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXQgZGV0dW5lQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy5kZXR1bmVDb250cm9sID0gY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0IGdhaW5Db21wb25lbnQoY29tcG9uZW50KXtcclxuICAgICAgICB0aGlzLmdhaW5Db250cm9sID0gY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0IHBpdGNoQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy5waXRjaENvbnRyb2wgPSBjb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXQgdm9pY2VzQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy52b2ljZXNDb250cm9sID0gY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0IHdhdmVmb3JtQ29tcG9uZW50KGNvbXBvbmVudCl7XHJcbiAgICAgICAgdGhpcy53YXZlZm9ybUNvbnRyb2wgPSBjb21wb25lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE9zY2lsbGF0b3I7IiwiaW1wb3J0IEtub2IgZnJvbSBcIi4va25vYlwiO1xyXG5pbXBvcnQgZHJhZ0lucHV0IGZyb20gJy4vZHJhZ0lucHV0JztcclxuaW1wb3J0IEFEU1JfR3JhcGhpYyBmcm9tIFwiLi8uLi91aV9jb21wb25lbnRzL2Fkc3JcIjtcclxuXHJcbmNsYXNzIFVJe1xyXG4gICAgY29uc3RydWN0b3Ioc3ludGgpe1xyXG4gICAgICAgIHRoaXMuc3ludGggPSBzeW50aDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cEtub2JzKCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cERyYWdJbnB1dCgpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBTZWxlY3QoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cEFEU1JfR3JhcGhpYygpO1xyXG5cclxuICAgICAgICAvLyBNb3VzZSB1cCBhbHdheXMgZGlzYWJsZXMgYW55IG1vdXNlbW92ZSBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vtb3ZlID0gJyc7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cEtub2JzKCl7XHJcbiAgICAgICAgbGV0IGtub2JFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudD1cImtub2JcIl0nKTtcclxuICAgICAgICBrbm9iRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcclxuICAgICAgICAgICAgaWYoIGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRwYXJlbnQgPT09ICdvc2NbMF0nICl7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goIGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRjb250cm9sICl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzBdLmdhaW5Db21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGV0dW5lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW50aC5Pc2NpbGxhdG9yc1swXS5kZXR1bmVDb21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRwYXJlbnQgPT09ICdvc2NbMV0nICl7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goIGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRjb250cm9sICl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzFdLmdhaW5Db21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGV0dW5lJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW50aC5Pc2NpbGxhdG9yc1sxXS5kZXR1bmVDb21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIGVsZW1lbnQuZGF0YXNldC5jb21wb25lbnRwYXJlbnQgPT09ICdhZHNyJyApe1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKCBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50Y29udHJvbCApe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2F0dGFjayc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ludGguYWRzci5hdHRhY2tDb21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVjYXknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLmFkc3IuZGVjYXlDb21wb25lbnQgPSBuZXcgS25vYihlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3VzdGFpbic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ludGguYWRzci5zdXN0YWluQ29tcG9uZW50ID0gbmV3IEtub2IoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbGVhc2UnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLmFkc3IucmVsZWFzZUNvbXBvbmVudCA9IG5ldyBLbm9iKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiggZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudHBhcmVudCA9PT0gJ2ZpbHRlcicgKXtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXR1cERyYWdJbnB1dCgpe1xyXG4gICAgICAgIGxldCBkcmFnSW5wdXRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudD1cImRyYWdJbnB1dFwiXScpO1xyXG4gICAgICAgIGRyYWdJbnB1dEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XHJcbiAgICAgICAgICAgIGlmKCBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50cGFyZW50ID09PSAnb3NjWzBdJyApIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwaXRjaCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ludGguT3NjaWxsYXRvcnNbMF0ucGl0Y2hDb21wb25lbnQgPSBuZXcgZHJhZ0lucHV0KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd2b2ljZXMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzBdLnZvaWNlc0NvbXBvbmVudCA9IG5ldyBkcmFnSW5wdXQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCBlbGVtZW50LmRhdGFzZXQuY29tcG9uZW50cGFyZW50ID09PSAnb3NjWzFdJyApIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwaXRjaCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ludGguT3NjaWxsYXRvcnNbMV0ucGl0Y2hDb21wb25lbnQgPSBuZXcgZHJhZ0lucHV0KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd2b2ljZXMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzFdLnZvaWNlc0NvbXBvbmVudCA9IG5ldyBkcmFnSW5wdXQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cFNlbGVjdCgpe1xyXG4gICAgICAgIGxldCBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0LndhdmVmb3JtU2VsZWN0Jyk7XHJcbiAgICAgICAgc2VsZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xyXG4gICAgICAgICAgICBpZiggZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudHBhcmVudCA9PT0gJ29zY1swXScgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzBdLndhdmVmb3JtQ29tcG9uZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiggZWxlbWVudC5kYXRhc2V0LmNvbXBvbmVudHBhcmVudCA9PT0gJ29zY1sxXScgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bnRoLk9zY2lsbGF0b3JzWzFdLndhdmVmb3JtQ29tcG9uZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBBRFNSX0dyYXBoaWMoKXtcclxuICAgICAgICB0aGlzLmFkc3JfZ3JhcGhpYyA9IG5ldyBBRFNSX0dyYXBoaWModGhpcy5zeW50aC5hZHNyLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdmcjYWRzckdyYXBoaWMnKSk7XHJcbiAgICAgICAgdGhpcy5zeW50aC5hZHNyLnNldFZhbHVlcygpO1xyXG4gICAgICAgIHRoaXMuYWRzcl9ncmFwaGljLnVwZGF0ZUdyYXBoaWMoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVUk7IiwiY2xhc3MgQURTUl9HcmFwaGlje1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50LCBncmFwaGljKXtcclxuICAgICAgICB0aGlzLnN5bnRoQ29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpYyA9IGdyYXBoaWM7XHJcblxyXG4gICAgICAgIGxldCBncmFwaGljU2l6ZSA9IGdyYXBoaWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBncmFwaGljU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IGdyYXBoaWNTaXplLndpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLnBhdGggPSBncmFwaGljLnF1ZXJ5U2VsZWN0b3IoJ3BhdGgnKTtcclxuXHJcbiAgICAgICAgdGhpcy5zeW50aENvbXBvbmVudC5hdHRhY2tDb250cm9sLmFmdGVyVXBkYXRlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVHcmFwaGljKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3ludGhDb21wb25lbnQuZGVjYXlDb250cm9sLmFmdGVyVXBkYXRlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVHcmFwaGljKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3ludGhDb21wb25lbnQuc3VzdGFpbkNvbnRyb2wuYWZ0ZXJVcGRhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyYXBoaWMoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zeW50aENvbXBvbmVudC5yZWxlYXNlQ29udHJvbC5hZnRlclVwZGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR3JhcGhpYygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVHcmFwaGljKCl7XHJcblxyXG4gICAgICAgIHRoaXMuc3ludGhDb21wb25lbnQuc2V0VmFsdWVzKCk7XHJcblxyXG4gICAgICAgIGxldCBkcmF3ID0gJyc7XHJcblxyXG4gICAgICAgIGxldCBhdHRhY2sgPSAodGhpcy5zeW50aENvbXBvbmVudC5hdHRhY2tDb250cm9sLnZhbHVlICogMS4yNSk7XHJcbiAgICAgICAgbGV0IGRlY2F5ID0gKHRoaXMuc3ludGhDb21wb25lbnQuZGVjYXlDb250cm9sLnZhbHVlICogMS4yNSk7XHJcbiAgICAgICAgbGV0IHN1c3RhaW4gPSAoKCh0aGlzLnN5bnRoQ29tcG9uZW50LnN1c3RhaW5Db250cm9sLnZhbHVlICogMTAwKSAvICgyNTApKSAvIDEwMCk7XHJcbiAgICAgICAgc3VzdGFpbiA9IHRoaXMuaGVpZ2h0IC0gKHN1c3RhaW4gKiB0aGlzLmhlaWdodCk7XHJcbiAgICAgICAgaWYgKHN1c3RhaW4gPCAyKSBzdXN0YWluID0gMTtcclxuICAgICAgICBlbHNlIGlmIChzdXN0YWluID4gKCB0aGlzLmhlaWdodCAtIDEgKSApIHN1c3RhaW4gPSB0aGlzLmhlaWdodCAtIDE7XHJcbiAgICAgICAgbGV0IHJlbGVhc2UgPSB0aGlzLnN5bnRoQ29tcG9uZW50LnJlbGVhc2VDb250cm9sLnZhbHVlO1xyXG5cclxuICAgICAgICBkcmF3ICs9ICdNMSwnICsgdGhpcy5oZWlnaHQgKyAnICc7XHJcblxyXG4gICAgICAgIC8vIEF0dGFjayAoc3RhcnRzIGZyb20gbG93ZXIgbGVmdCBjb3JuZXIpXHJcbiAgICAgICAgaWYgKCBhdHRhY2sgPCAxIClcclxuICAgICAgICAgICAgZHJhdyArPSAnTDEsMSc7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBkcmF3ICs9ICdRMSwxICcgKyBhdHRhY2sgKyAnLDEnO1xyXG5cclxuICAgICAgICAvLyBEZWNheSAoc3RhcnRzIHdoZXJlIGF0dGFjayBlbmRzIHdpdGggYSBjdXJ2ZSBkb3dud2FyZHMgdG93YXJkcyB0aGUgc3VzdGFpbiBsZXZlbClcclxuICAgICAgICBpZiAoIGRlY2F5IDwgMSApXHJcbiAgICAgICAgICAgIGRyYXcgKz0gJ0wnICsgYXR0YWNrICsgJywnICsgc3VzdGFpbjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGRyYXcgKz0gJ1EnICsgYXR0YWNrICsgJywnICsgc3VzdGFpbiArICcgJyArIChkZWNheSArIGF0dGFjaykgKyAnLCcgKyBzdXN0YWluO1xyXG5cclxuICAgICAgICAvLyBTdXN0YWluXHJcbiAgICAgICAgZHJhdyArPSAnTCcgKyA3MDAgKyAnLCcgKyBzdXN0YWluO1xyXG5cclxuICAgICAgICAvLyBSZWxlYXNlXHJcbiAgICAgICAgZHJhdyArPSAnUScgKyA3MDAgKyAnLCcgKyAodGhpcy5oZWlnaHQgLSAxKSArICcgJyArICg3MDAgKyByZWxlYXNlKSArICcsJyArICh0aGlzLmhlaWdodCAtIDEpO1xyXG5cclxuICAgICAgICAvLyBBZGQgdG8gc3ZnXHJcbiAgICAgICAgdGhpcy5wYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGRyYXcpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQURTUl9HcmFwaGljOyIsImNsYXNzIFVJX0NvbXBvbmVudF9CYXNle1xyXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVSV9Db21wb25lbnRfQmFzZTsiLCJpbXBvcnQgVUlfQ29tcG9uZW50X0Jhc2UgZnJvbSAnLi9iYXNlJztcclxuXHJcbmNsYXNzIGRyYWdJbnB1dCBleHRlbmRzIFVJX0NvbXBvbmVudF9CYXNle1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpe1xyXG4gICAgICAgIHN1cGVyKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnZhbHVlID0gcGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5taW5WYWwgPSBwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1taW5WYWwnKSk7XHJcbiAgICAgICAgdGhpcy5tYXhWYWwgPSBwYXJzZUludChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1tYXhWYWwnKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3R5bGUoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWYWx1ZSgpe1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkub25tb3VzZW1vdmUgPSBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsZW1lbnRPZmZzZXQgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50Q2VudGVyID0gZWxlbWVudE9mZnNldC50b3AgKyAoZWxlbWVudE9mZnNldC5oZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgbGV0IGN1cnNvclJlbGF0aXZlVG9DZW50ZXIgPSAoZWxlbWVudENlbnRlciAtIGV2ZW50LmNsaWVudFkpIC8gMTU7XHJcblxyXG4gICAgICAgICAgICBsZXQgcm91bmRlZCA9IE1hdGgucm91bmQodGhpcy5wcmV2aW91c1ZhbHVlICsgY3Vyc29yUmVsYXRpdmVUb0NlbnRlcik7XHJcbiAgICAgICAgICAgIGlmIChyb3VuZGVkID49IHRoaXMubWluVmFsICYmIHJvdW5kZWQgPD0gdGhpcy5tYXhWYWwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gcm91bmRlZDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0eWxlKCl7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRyYWdJbnB1dDsiLCJpbXBvcnQgVUlfQ29tcG9uZW50X0Jhc2UgZnJvbSAnLi9iYXNlJztcclxuXHJcbmNsYXNzIEtub2IgZXh0ZW5kcyBVSV9Db21wb25lbnRfQmFzZXtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KXtcclxuICAgICAgICBzdXBlcihlbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWZ0ZXJVcGRhdGUgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLm1pblZhbCA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXhWYWwgPSAyNTA7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnNlSW50KHRoaXMuZWxlbWVudC5kYXRhc2V0LnZhbHVlKTtcclxuICAgICAgICB0aGlzLmxhc3RDdXJzb3JQb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuZGlhbCA9IHRoaXMuY3JlYXRlRGlhbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0eWxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFmdGVyVXBkYXRlKGV2ZW50KXtcclxuICAgICAgICB0aGlzLl9hZnRlclVwZGF0ZSA9IGV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZURpYWwoKXtcclxuXHJcbiAgICAgICAgbGV0IGVsZW1lbnRPZmZzZXQgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgbGV0IGRpbWVuc2lvbiA9IGVsZW1lbnRPZmZzZXQud2lkdGggKyAxMDtcclxuXHJcbiAgICAgICAgbGV0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGRpbWVuc2lvbi50b1N0cmluZygpKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGRpbWVuc2lvbi50b1N0cmluZygpKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCAnMCAwICcrZGltZW5zaW9uLnRvU3RyaW5nKCkrJyAnK2RpbWVuc2lvbi50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgbGV0IGNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IChkaW1lbnNpb24gLyAyKSAtIDQ7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCAoZGltZW5zaW9uIC8yKS50b1N0cmluZygpKTtcclxuICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsIChkaW1lbnNpb24gLzIpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3InLCByYWRpdXMudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzEnKTtcclxuXHJcbiAgICAgICAgbGV0IGNpcmN1bWZlcmVuY2UgPSAoMiAqIE1hdGguUEkgKiByYWRpdXMpO1xyXG5cclxuICAgICAgICBjaXJjbGUuc3RhcnRQb2ludCA9IGNpcmN1bWZlcmVuY2U7XHJcbiAgICAgICAgY2lyY2xlLmVuZFBvaW50ID0gKGNpcmN1bWZlcmVuY2UqMC4zMyk7XHJcblxyXG4gICAgICAgIGNpcmN1bWZlcmVuY2UgPSBjaXJjdW1mZXJlbmNlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIGNpcmN1bWZlcmVuY2UgKyAnICcgKyBjaXJjdW1mZXJlbmNlKTtcclxuICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsIChyYWRpdXMqMC4zMykudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHN2Zyk7XHJcblxyXG4gICAgICAgIHJldHVybiBjaXJjbGU7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFN0eWxlKCl7XHJcbiAgICAgICAgbGV0IHZhbCA9IHRoaXMudmFsdWUgLSAodGhpcy5tYXhWYWwgLyAyKTtcclxuICAgICAgICAgICAgdmFsID0gXCJyb3RhdGUoXCIgKyB2YWwgKyBcImRlZylcIjtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gdmFsO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB2YWw7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLk1velRyYW5zZm9ybSA9IHZhbDtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubXNUcmFuc2Zvcm0gPSB2YWw7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLk9UcmFuc2Zvcm0gPSB2YWw7XHJcblxyXG4gICAgICAgIC8vIEdldCBwZXJjZW50YWdlIG9mIHZhbHVlXHJcbiAgICAgICAgbGV0IHZhbFBlcmNlbnRhZ2UgPSAoKHRoaXMudmFsdWUgLSB0aGlzLm1pblZhbCkgKiAxMDApIC8gKHRoaXMubWF4VmFsIC0gdGhpcy5taW5WYWwpO1xyXG5cclxuICAgICAgICAvLyBHZXQgZGlhbCB2YWx1ZVxyXG4gICAgICAgIGxldCBkaWFsVmFsID0gKHRoaXMuZGlhbC5lbmRQb2ludCAtIHRoaXMuZGlhbC5zdGFydFBvaW50KSAqICgoMTAwLXZhbFBlcmNlbnRhZ2UpIC8gMTAwICk7XHJcblxyXG4gICAgICAgIC8vIFNldCBwZXJjZW50YWdlIG9mIGRpYWxcclxuICAgICAgICB0aGlzLmRpYWwuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsICh0aGlzLmRpYWwuZW5kUG9pbnQgLSBkaWFsVmFsKS50b1N0cmluZygpICk7XHJcblxyXG4gICAgICAgIGlmKCB0aGlzLl9hZnRlclVwZGF0ZSApXHJcbiAgICAgICAgICAgIHRoaXMuX2FmdGVyVXBkYXRlKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZhbHVlKCl7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWxlbWVudE9mZnNldCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnRDZW50ZXIgPSBlbGVtZW50T2Zmc2V0LnRvcCArIChlbGVtZW50T2Zmc2V0LmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3Vyc29yUmVsYXRpdmVUb0NlbnRlciA9IChlbGVtZW50Q2VudGVyIC0gZXZlbnQuY2xpZW50WSkgLyAyMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJzb3JSZWxhdGl2ZVRvQ2VudGVyID4gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMubGFzdEN1cnNvclBvc2l0aW9uIDwgY3Vyc29yUmVsYXRpdmVUb0NlbnRlcikgJiZcclxuICAgICAgICAgICAgICAgICAgICAodGhpcy52YWx1ZSA8PSB0aGlzLm1heFZhbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgKyBjdXJzb3JSZWxhdGl2ZVRvQ2VudGVyO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52YWx1ZSA+PSB0aGlzLm1pblZhbClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSAtIGN1cnNvclJlbGF0aXZlVG9DZW50ZXI7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgodGhpcy5sYXN0Q3Vyc29yUG9zaXRpb24gPiBjdXJzb3JSZWxhdGl2ZVRvQ2VudGVyKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnZhbHVlID49IHRoaXMubWluVmFsKSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZSArIGN1cnNvclJlbGF0aXZlVG9DZW50ZXI7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZhbHVlIDw9IHRoaXMubWF4VmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlIC0gY3Vyc29yUmVsYXRpdmVUb0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEN1cnNvclBvc2l0aW9uID0gY3Vyc29yUmVsYXRpdmVUb0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBLbm9iOyJdfQ=="}